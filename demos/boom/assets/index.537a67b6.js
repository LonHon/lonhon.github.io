var L=Object.defineProperty,S=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var y=(e,t,l)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,F=(e,t)=>{for(var l in t||(t={}))P.call(t,l)&&y(e,l,t[l]);if(N)for(var l of N(t))I.call(t,l)&&y(e,l,t[l]);return e},g=(e,t)=>S(e,j(t));import{j as w,r as x,R as q,a as G}from"./vendor.b0ffa8ee.js";const K=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function l(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(r){if(r.ep)return;r.ep=!0;const n=l(r);fetch(r.href,n)}};K();function T(e=5,t=5,l=3){const c=new Array(e);for(let n=0;n<e;n++){c[n]=new Array(t);for(let a=0;a<t;a++)c[n][a]={isMine:!1,isOpen:!1,isFlag:!1,silbingMines:0}}let r=l;for(;r>0;){const n=Math.floor(Math.random()*e),a=Math.floor(Math.random()*t);c[n][a].isMine||(c[n][a].isMine=!0,r--)}return c}function A(e,t){const[l,c,r]=e;let n=0;for(let a=-1;a<2;a++)if(!!r[l+a])for(let d=-1;d<2;d++){const p=r[l+a][c+d];!p||a===0&&d===0||t(p)&&n++}return n}function W(e,t){const[l,c,r]=e;for(let n=-1;n<2;n++)if(!!r[l+n])for(let a=-1;a<2;a++)!r[l+n][c+a]||n===0&&a===0||t([l+n,c+a,r]);return r}function Y(e){const[t,l,c]=e;return A([t,l,c],n=>n.isMine)}function z(e,t){for(let l=0;l<e.rows;l++)for(let c=0;c<e.cols;c++)t[l][c].silbingMines=Y([l,c,t])}const m=w.exports.jsx,h=w.exports.jsxs;let b=[];function H(e){b=T(e.rows,e.cols,e.mines),z(e,b)}function J(){const[e,t]=x.exports.useState({rows:7,cols:7,mines:8,opens:0,unFlagMines:5,generated:!1,finished:!1}),[l,c]=x.exports.useState("\u{1F446}\u{1F446}\u{1F446}\u70B9\u51FB\u5F00\u59CBboom boom boom\u{1F446}\u{1F446}\u{1F446}"),[r,n]=x.exports.useState(b);function a(u){const[o,s,i]=u;i[o][s].isOpen=!0,e.opens++}function d(u){const[o,s,i]=u;if(o<0||o>=i.length||s<0||s>=i[o].length)return;const f=i[o][s];!f||f.isMine||f.isFlag||f.isOpen||(a([o,s,i]),f.silbingMines===0&&(d([o-1,s-1,i]),d([o-1,s,i]),d([o-1,s+1,i]),d([o,s-1,i]),d([o,s,i]),d([o,s+1,i]),d([o+1,s-1,i]),d([o+1,s,i]),d([o+1,s+1,i])))}function p(u){u.forEach(o=>o.forEach(s=>s.isOpen=!0)),n([...u]),c("\u{1F62D}\u{1F62D}\u{1F62D}\u4F60\u8F93\u4E86\uFF0C\u70B9\u51FB\u5F00\u59CB\u91CD\u65B0\u6311\u6218\u{1F62D}\u{1F62D}\u{1F62D}")}function O(){const{rows:u,cols:o,opens:s,mines:i}=e;s+i===u*o&&(c("\u{1F389}\u{1F389}\u{1F389} You win \u{1F389}\u{1F389}\u{1F389}"),t(g(F({},e),{finished:!0})))}function C(u){const[o,s,i]=u,f=i[o][s];if(!f.isOpen&&!f.isFlag){if(f.isMine){p(i);return}f.silbingMines>0&&(a(u),n([...i])),f.silbingMines===0&&(d(u),n([...i])),O()}}function B(u){const[o,s,i]=u,f=i[o][s];f.isOpen||(f.isFlag?(r[o][s].isFlag=!1,e.unFlagMines++):(r[o][s].isFlag=!0,e.unFlagMines--),t(F({},e)),n([...r]),c("\u5269\u4F59\u70B8\u5F39\u6570\u91CF\uFF1A"+e.unFlagMines))}function D(u){const[o,s,i]=u,f=i[o][s];if(!f.isOpen)return;A([o,s,i],M=>M.isFlag)===f.silbingMines&&W([o,s,i],M=>{C(M)})}function R(){H(e),n(b),t(g(F({},e),{generated:!0,unFlagMines:e.mines,opens:0,finished:!1})),c("\u5269\u4F59\u70B8\u5F39\u6570\u91CF\uFF1A"+e.mines)}const k=u=>u.map((o,s)=>m("div",{className:"row",children:o.map((i,f)=>m("div",{className:"cell mr-1 mb-1 inline-block border border-gray-300 w-8 h-8 text-center",onClick:()=>C([s,f,u]),onDoubleClick:()=>D([s,f,u]),onContextMenu:v=>{v.preventDefault(),B([s,f,u])},children:i.isOpen?i.isMine?m("div",{className:"mine",children:"\u{1F387}"}):m("div",{className:"text-green-500",children:i.silbingMines}):i.isFlag?m("div",{className:"bg-gray-100",children:"\u{1F6A9}"}):m("div",{className:"unpack-cell bg-gray-100",children:"\xA0"})},f))},s)),E=()=>m("div",{className:"mt-4",children:m("div",{className:"text-center",children:l})});return h("div",{className:"text-lg font-bold h-screen bg-gray-800 text-gray-400 flex flex-col items-center pt-10",children:[h("div",{className:"mb-6",children:[h("div",{children:["\u884C\u5217\u6570\u91CF\uFF1A",m("input",{type:"number",className:"ghost-input",step:"1",min:"0",max:"50",value:e.cols,onChange:u=>{t(g(F({},e),{rows:Number(u.target.value),cols:Number(u.target.value)}))}})]}),h("div",{className:"mt-2",children:["\u70B8\u5F39\u6570\u91CF\uFF1A",m("input",{type:"number",className:"ghost-input",step:"1",min:"1",max:"100",value:e.mines,onChange:u=>{t(g(F({},e),{mines:Number(u.target.value),unFlagMines:Number(u.target.value)}))}})]}),m("div",{className:"text-center",children:m("button",{className:"border-2 border-green-400 text-green-500 rounded-lg px-4 mt-4",onClick:R,children:"\u5F00\u59CB\u6E38\u620F"})})]}),m("div",{className:(e.finished?"game-disable":"")+" game-rect",children:k(r)}),m(E,{})]})}q.render(m(G.StrictMode,{children:m(J,{})}),document.getElementById("root"));
